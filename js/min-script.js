var buttonMessage=document.querySelector(".button-message"),popupMessage=document.querySelector(".popup-message"),closeButton=document.querySelectorAll(".button-close"),formMessage=popupMessage.querySelector("form"),userName=popupMessage.querySelector("[name=user-name]"),userEmail=popupMessage.querySelector("[name=user-email]"),textMessage=popupMessage.querySelector("textarea"),isStorageSupport=!0,storageName="",storageEmail="",popupMap=document.querySelector(".popup-map"),mapImage=document.querySelector(".map");try{storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("eMail")}catch(e){isStorageSupport=!1}buttonMessage.addEventListener("click",function(e){e.preventDefault(),popupMessage.classList.add("popup-show"),storageName?(userName.value=storageName,userEmail.focus()):storageEmail?(userEmail.value=storageEmail,textMessage.focus()):userName.focus()});for(var i=0;i<closeButton.length;i++)closeButton[i].addEventListener("click",function(e){e.preventDefault(),popupMessage.classList.remove("popup-show"),popupMap.classList.remove("popup-show"),popupMessage.classList.remove("modal-error")});window.addEventListener("keydown",function(e){27===e.keyCode&&popupMessage.classList.contains("popup-show")&&(e.preventDefault(),popupMessage.classList.remove("popup-show"))}),formMessage.addEventListener("submit",function(e){userName.value&&userEmail.value?isStorageSupport&&(localStorage.setItem("name",userName.value),localStorage.setItem("eMail",userEmail.value)):(e.preventDefault(),popupMessage.classList.remove("modal-error"),popupMessage.offsetWidth=popupMessage.offsetWidth,popupMessage.classList.add("modal-error"))}),mapImage.addEventListener("click",function(e){e.preventDefault(),popupMap.classList.add("popup-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&popupMap.classList.contains("popup-show")&&(e.preventDefault(),popupMap.classList.remove("popup-show"))});
